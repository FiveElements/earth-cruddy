<link rel="import" href="../polymer/polymer-element.html">

<!-- Ensure Web Animations polyfill is loaded since neon-animation 2.0 doesn't import it -->
<link rel="import" href="../neon-animation/web-animations.html">

<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<link rel="import" href="../paper-styles/paper-styles.html">


<dom-module id="earth-dropdown-trigger">
    <template>
        <style>
            :host {
                display:block;
            }

            :host ::slotted([slot=dropdown-content]){
                @apply ( --paper-font-menu);
                background-color: white;
                color: black;
                line-height: 20px;
                border-radius: 3px;
                box-shadow: 0px 2px 6px #ccc;
            }

            iron-dropdown {
                z-index: 42;
            }
        </style>

        <slot name="dropdown-trigger" on-tap="open"></slot>
        <iron-dropdown id="dropdown" on-tap="_handleSelectItem"
                       vertical-align="[[verticalAlign]]"
                       horizontal-align="[[horizontalAlign]]"
                       vertical-offset="[[verticalOffset]]"
                       disabled="[[disabled]]"
                       open-animation-config="[[openAnimationConfig]]"
                       close-animation-config="[[closeAnimationConfig]]">
            <slot name="dropdown-content" slot="dropdown-content"></slot>
        </iron-dropdown>
    </template>

    <script>

        class EarthDropdownTrigger extends Polymer.Element {
            static get is() {
                return 'earth-dropdown-trigger';
            }

            static get properties() {
                return {
                    verticalOffset: {
                      type: Number,
                      value: 40
                    },
                    verticalAlign: {
                        type: String,
                        value: 'top'
                    },
                    horizontalAlign: {
                        type: String,
                        value: 'right'
                    },
                    disabled: Boolean,
//                    openAnimationConfig: {
//                        type: Array,
//                        value: function() {
//                            return [{
//                                name: 'fade-in-animation',
//                                timing: {
//                                    delay: 150,
//                                    duration: 50
//                                }
//                            }, {
//                                name: 'expand-animation',
//                                timing: {
//                                    delay: 150,
//                                    duration: 200
//                                }
//                            }];
//                        }
//                    },
//                    closeAnimationConfig: {
//                        type: Array,
//                        value: function() {
//                            return [{
//                                name: 'fade-out-animation',
//                                timing: {
//                                    duration: 200
//                                }
//                            }];
//                        }
//                    }

                };
            }

            open() {
                this.$.dropdown.open();
            }
            _handleSelectItem(e) {
                this.$.dropdown.close();
            }
        }

        window.customElements.define(EarthDropdownTrigger.is, EarthDropdownTrigger);
    </script>
</dom-module>
